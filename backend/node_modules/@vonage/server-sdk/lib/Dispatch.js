"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _index = _interopRequireDefault(require("./index"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class Dispatch {
  static get PATH() {
    return "/v0.1/dispatch";
  }

  constructor(credentials, options) {
    this.creds = credentials;
    this.options = options; // Used to facilitate testing of the call to the underlying object

    this._vonage = this.options.vonageOverride || _index.default;

    this._vonage.initialize(this.creds.apiKey, this.creds.apiSecret, this.options);
  }

  create(template, workflow, callback) {
    var params = {
      template: template,
      workflow: workflow
    };
    return this.options.api.post(Dispatch.PATH, params, callback, true, {
      "Content-Type": "application/json"
    });
  }

}

var _default = Dispatch;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9EaXNwYXRjaC5qcyJdLCJuYW1lcyI6WyJEaXNwYXRjaCIsIlBBVEgiLCJjb25zdHJ1Y3RvciIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsImNyZWRzIiwiX3ZvbmFnZSIsInZvbmFnZU92ZXJyaWRlIiwidm9uYWdlIiwiaW5pdGlhbGl6ZSIsImFwaUtleSIsImFwaVNlY3JldCIsImNyZWF0ZSIsInRlbXBsYXRlIiwid29ya2Zsb3ciLCJjYWxsYmFjayIsInBhcmFtcyIsImFwaSIsInBvc3QiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7O0FBRUE7Ozs7QUFFQSxNQUFNQSxRQUFOLENBQWU7QUFDRSxhQUFKQyxJQUFJLEdBQUc7QUFDaEIsV0FBTyxnQkFBUDtBQUNEOztBQUVEQyxFQUFBQSxXQUFXLENBQUNDLFdBQUQsRUFBY0MsT0FBZCxFQUF1QjtBQUNoQyxTQUFLQyxLQUFMLEdBQWFGLFdBQWI7QUFDQSxTQUFLQyxPQUFMLEdBQWVBLE9BQWYsQ0FGZ0MsQ0FJaEM7O0FBQ0EsU0FBS0UsT0FBTCxHQUFlLEtBQUtGLE9BQUwsQ0FBYUcsY0FBYixJQUErQkMsY0FBOUM7O0FBRUEsU0FBS0YsT0FBTCxDQUFhRyxVQUFiLENBQ0UsS0FBS0osS0FBTCxDQUFXSyxNQURiLEVBRUUsS0FBS0wsS0FBTCxDQUFXTSxTQUZiLEVBR0UsS0FBS1AsT0FIUDtBQUtEOztBQUVEUSxFQUFBQSxNQUFNLENBQUNDLFFBQUQsRUFBV0MsUUFBWCxFQUFxQkMsUUFBckIsRUFBK0I7QUFDbkMsUUFBTUMsTUFBTSxHQUFHO0FBQ2JILE1BQUFBLFFBQVEsRUFBRUEsUUFERztBQUViQyxNQUFBQSxRQUFRLEVBQUVBO0FBRkcsS0FBZjtBQUtBLFdBQU8sS0FBS1YsT0FBTCxDQUFhYSxHQUFiLENBQWlCQyxJQUFqQixDQUFzQmxCLFFBQVEsQ0FBQ0MsSUFBL0IsRUFBcUNlLE1BQXJDLEVBQTZDRCxRQUE3QyxFQUF1RCxJQUF2RCxFQUE2RDtBQUNsRSxzQkFBZ0I7QUFEa0QsS0FBN0QsQ0FBUDtBQUdEOztBQTVCWTs7ZUErQkFmLFEiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHZvbmFnZSBmcm9tIFwiLi9pbmRleFwiO1xuXG5jbGFzcyBEaXNwYXRjaCB7XG4gIHN0YXRpYyBnZXQgUEFUSCgpIHtcbiAgICByZXR1cm4gXCIvdjAuMS9kaXNwYXRjaFwiO1xuICB9XG5cbiAgY29uc3RydWN0b3IoY3JlZGVudGlhbHMsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmNyZWRzID0gY3JlZGVudGlhbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIC8vIFVzZWQgdG8gZmFjaWxpdGF0ZSB0ZXN0aW5nIG9mIHRoZSBjYWxsIHRvIHRoZSB1bmRlcmx5aW5nIG9iamVjdFxuICAgIHRoaXMuX3ZvbmFnZSA9IHRoaXMub3B0aW9ucy52b25hZ2VPdmVycmlkZSB8fCB2b25hZ2U7XG5cbiAgICB0aGlzLl92b25hZ2UuaW5pdGlhbGl6ZShcbiAgICAgIHRoaXMuY3JlZHMuYXBpS2V5LFxuICAgICAgdGhpcy5jcmVkcy5hcGlTZWNyZXQsXG4gICAgICB0aGlzLm9wdGlvbnNcbiAgICApO1xuICB9XG5cbiAgY3JlYXRlKHRlbXBsYXRlLCB3b3JrZmxvdywgY2FsbGJhY2spIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG4gICAgICB3b3JrZmxvdzogd29ya2Zsb3csXG4gICAgfTtcblxuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYXBpLnBvc3QoRGlzcGF0Y2guUEFUSCwgcGFyYW1zLCBjYWxsYmFjaywgdHJ1ZSwge1xuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlzcGF0Y2g7XG4iXX0=